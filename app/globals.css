@import "tailwindcss";
@import "../libs/shared-ui/tokens.css";

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html {
  font-family: var(--font-sans);
  font-size: var(--font-size-base);
  color: var(--color-text-primary);
  background-color: var(--color-bg-primary);
  -webkit-text-size-adjust: 100%;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  min-height: 100dvh;
  background-color: var(--color-bg-primary);
  overscroll-behavior-y: none;
}

/* Mobile-first container  max 430px, centered */
.app-container {
  max-width: 430px;
  margin: 0 auto;
  min-height: 100dvh;
  position: relative;
  background-color: var(--color-bg-primary);
  /* Subtle radial glow at top for depth */
  background-image: radial-gradient(
    ellipse 80% 60% at 50% 0%,
    rgba(212,146,42,0.06) 0%,
    transparent 70%
  );
}

/* Page content leaves room for fixed bottom nav */
.page-content {
  padding-bottom: calc(var(--nav-height) + var(--safe-bottom));
  padding-top: var(--safe-top);
  min-height: 100dvh;
}

/* Desktop sidebar fill */
@media (min-width: 431px) {
  body {
    background-color: #0b0905;
  }

  .app-container {
    box-shadow: 0 0 60px rgba(0, 0, 0, 0.8);
  }
}

::-webkit-scrollbar { width: 4px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb {
  background: var(--color-border);
  border-radius: var(--radius-full);
}

/* ── Page-load stagger reveal ─────────────────────────── */
@keyframes fade-up {
  from { opacity: 0; transform: translateY(12px); }
  to   { opacity: 1; transform: translateY(0); }
}

.page-content > * {
  animation: fade-up 0.4s ease both;
}
.page-content > *:nth-child(1) { animation-delay: 0ms; }
.page-content > *:nth-child(2) { animation-delay: 60ms; }
.page-content > *:nth-child(3) { animation-delay: 120ms; }
.page-content > *:nth-child(4) { animation-delay: 180ms; }
.page-content > *:nth-child(5) { animation-delay: 240ms; }

/* ── FAB spring animation ─────────────────────────────── */
@keyframes fab-spring {
  0%   { transform: scale(1); }
  25%  { transform: scale(0.88); }
  65%  { transform: scale(1.05); }
  100% { transform: scale(1.0); }
}
.fab-spring-trigger {
  animation: fab-spring 0.35s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

/* ── Skeleton shimmer ─────────────────────────────────── */
@keyframes skeleton-shimmer {
  0%   { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}
.skeleton-shimmer::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(212,146,42,0.07) 50%,
    transparent 100%
  );
  animation: skeleton-shimmer 1.4s ease infinite;
}

/* ── Toast slide-in ───────────────────────────────────── */
@keyframes toast-in {
  from { opacity: 0; transform: translateY(-12px) scale(0.96); }
  to   { opacity: 1; transform: translateY(0) scale(1); }
}
@keyframes toast-out {
  from { opacity: 1; transform: translateY(0) scale(1); }
  to   { opacity: 0; transform: translateY(-8px) scale(0.96); }
}
.toast-enter { animation: toast-in 0.25s cubic-bezier(0.34, 1.56, 0.64, 1) both; }
.toast-exit  { animation: toast-out 0.2s ease forwards; }

/* ── Page enter animation (applied to loading skeletons + page roots) ── */
@keyframes page-enter {
  from { opacity: 0; transform: translateY(6px); }
  to   { opacity: 1; transform: translateY(0); }
}
.page-enter {
  animation: page-enter 0.2s ease both;
}

/* ── Stagger list items ───────────────────────────────── */
.stagger-list > * {
  animation: fade-up 0.35s ease both;
}
.stagger-list > *:nth-child(1)  { animation-delay: 0ms; }
.stagger-list > *:nth-child(2)  { animation-delay: 50ms; }
.stagger-list > *:nth-child(3)  { animation-delay: 100ms; }
.stagger-list > *:nth-child(4)  { animation-delay: 150ms; }
.stagger-list > *:nth-child(5)  { animation-delay: 200ms; }
.stagger-list > *:nth-child(6)  { animation-delay: 250ms; }
.stagger-list > *:nth-child(7)  { animation-delay: 300ms; }
.stagger-list > *:nth-child(8)  { animation-delay: 350ms; }
.stagger-list > *:nth-child(n+9){ animation-delay: 400ms; }

/* ── Inline field normalization ───────────────────────────────── */
.field-input {
  width: 100%;
  background: var(--input-bg);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  padding: var(--space-2) var(--space-3);
  color: var(--color-text);
  font-size: var(--font-size-sm);
  font-family: var(--font-sans);
  outline: none;
  box-sizing: border-box;
  transition: border-color 180ms ease, box-shadow 180ms ease;
}
.field-input:focus {
  border-color: var(--color-border-focus);
  box-shadow: var(--input-focus-ring);
}
.field-input::placeholder { color: var(--color-text-faint); }

.field-textarea {
  width: 100%;
  background: var(--input-bg);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  padding: var(--space-3);
  color: var(--color-text);
  font-size: var(--font-size-sm);
  font-family: var(--font-sans);
  line-height: var(--line-height-normal);
  resize: none;
  outline: none;
  box-sizing: border-box;
  transition: border-color 180ms ease, box-shadow 180ms ease;
}
.field-textarea:focus {
  border-color: var(--color-border-focus);
  box-shadow: var(--input-focus-ring);
}
.field-textarea::placeholder { color: var(--color-text-faint); }
